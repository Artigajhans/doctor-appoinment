import{a as N,B as v,r as c,y as S,j as e,L as q}from"./index-poiuNOaa.js";import{u as E,c as h,b as F,a as l,d as I,h as r}from"./handleClasses-CwKZaIIi.js";import{B as g}from"./Button-BpiecJEl.js";const k=()=>{const f=N(),[x,{isSuccess:o,isLoading:m}]=v(),[T,y]=c.useState(null),[u,p]=c.useState(null),a=E({enableReinitialize:!0,initialValues:{name:"",email:"",specialization:"",mobile:"",address:"",profileImage:null,schedule:[{day:"",startTime:"",endTime:""}]},validationSchema:h({name:l().required("Enter name"),email:l().required("Enter email"),specialization:l().required("Enter specialization"),mobile:l().required("Enter mobile"),address:l().required("Enter address"),profileImage:I().required("Upload profile image"),schedule:F().of(h().shape({day:l().required("Enter day"),startTime:l().required("Enter start time"),endTime:l().required("Enter end time")})).min(1,"At least one schedule entry is required")}),onSubmit:(s,{resetForm:t})=>{console.log(s);const i=new FormData;for(const n in s)n==="schedule"?i.append("schedule",JSON.stringify(s.schedule)):n!=="profileImage"&&i.append(n,s[n]);s.profileImage&&i.append("profileImage",s.profileImage),x(i),t()}});c.useEffect(()=>{o&&(S.success("Doctor register success"),f("/Doctor-login"))},[o]);const d=(s,t)=>{const i=[...a.values.schedule];i[s][t.target.name]=t.target.value,a.setFieldValue("schedule",i)},j=()=>{a.setFieldValue("schedule",[...a.values.schedule,{day:"",startTime:"",endTime:""}])},b=s=>{const t=a.values.schedule.filter((i,n)=>n!==s);a.setFieldValue("schedule",t)};return e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-6 offset-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header text-center",children:"Doctor Registration"}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:a.handleSubmit,children:[e.jsx("input",{className:r(a,"name"),...a.getFieldProps("name"),type:"text",placeholder:"Name"}),e.jsx("input",{className:r(a,"email"),...a.getFieldProps("email"),type:"email",placeholder:"Email"}),e.jsx("input",{className:r(a,"specialization"),...a.getFieldProps("specialization"),type:"text",placeholder:"Specialization"}),e.jsx("input",{className:r(a,"mobile"),...a.getFieldProps("mobile"),type:"text",placeholder:"mobile"}),e.jsx("input",{className:r(a,"address"),...a.getFieldProps("address"),type:"text",placeholder:"Address"}),e.jsx("input",{className:r(a,"profileImage"),type:"file",onChange:s=>{const t=s.target.files[0];t&&(p(URL.createObjectURL(t)),a.setFieldValue("profileImage",t))}}),u&&e.jsx("img",{src:u,height:50,className:"my-2"}),e.jsx(g,{onClick:()=>{y(!1),p([]),a.setFieldValue("profileImage","")},className:"me-2 my-2 btn-danger btn-sm",children:"Cancel"}),e.jsx("h3",{children:"Doctor Schedule"}),a.values.schedule.map((s,t)=>e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"day",placeholder:"Day (e.g., Monday)",value:s.day,onChange:i=>d(t,i),required:!0}),e.jsx("input",{type:"time",name:"startTime",value:s.startTime,className:r(a,"startTime"),onChange:i=>d(t,i),required:!0}),e.jsx("input",{type:"time",name:"endTime",value:s.endTime,className:r(a,"endTime"),onChange:i=>d(t,i),required:!0}),e.jsx("button",{type:"button",onClick:()=>b(t),children:"Remove"})]},t)),e.jsx(g,{className:"btn btn-secondary w-100 my-2",onClick:j,children:"Add Schedule"}),e.jsx("button",{className:"btn btn-primary w-100",type:"submit",disabled:m,children:m?"Registering...":"Register"})]}),e.jsx(q,{className:"nav-link text-center p-2",to:"/login-patient",children:"Already have an account? Sign In"})]})]})})})})};export{k as default};
